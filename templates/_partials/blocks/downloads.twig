{% set heading = block.heading ? block.heading : 'Free Downloads' %}

{% if block.selectDownloads %}
    {% set downloads = block.featuredDownloads.all() %}
{% else %}
    {% set downloads = craft.entries().section('downloads').all() %}
{% endif %}


{% if block.color and block.color.value == 'beige' %}
    {% set color = 'bg-beige-100' %}
{% else %}
    {% set color = '' %}
{% endif %}

<section class="{{ color }}">
    <div class="{{ color }} container mx-auto py-12 lg:py-24">
        <div class="show-all py-4 {{ downloads|length < 6 ? 'show' : '' }}">
            <h3 class="font-effra font-bold text-2xl lg:text-[2.5rem] leading-[1.2] text-blue-900 mb-6 lg:mb-10">{{heading}}</h3>
            <div class="show-all-content justify-normal">
                {% for download in downloads %}
                <a href="{{ download.downloadAsset.one().getUrl() }}" class="contents" target="__blank">
                    <div class="download-card{{ color == 'bg-beige-100' ? ' bg-white/80' : ' bg-blue-100' }}">
                        <div class="download-card-title">{{download.title}}</div>
                        <div class="download-card-cta">
                            View Download
                            <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.8538 8.35403L9.35375 12.854C9.25993 12.9478 9.13268 13.0006 9 13.0006C8.86732 13.0006 8.74007 12.9478 8.64625 12.854C8.55243 12.7602 8.49972 12.633 8.49972 12.5003C8.49972 12.3676 8.55243 12.2403 8.64625 12.1465L12.2931 8.50028H2.5C2.36739 8.50028 2.24021 8.4476 2.14645 8.35383C2.05268 8.26006 2 8.13289 2 8.00028C2 7.86767 2.05268 7.74049 2.14645 7.64672C2.24021 7.55296 2.36739 7.50028 2.5 7.50028H12.2931L8.64625 3.85403C8.55243 3.76021 8.49972 3.63296 8.49972 3.50028C8.49972 3.3676 8.55243 3.24035 8.64625 3.14653C8.74007 3.05271 8.86732 3 9 3C9.13268 3 9.25993 3.05271 9.35375 3.14653L13.8538 7.64653C13.9002 7.69296 13.9371 7.74811 13.9623 7.80881C13.9874 7.86951 14.0004 7.93457 14.0004 8.00028C14.0004 8.06599 13.9874 8.13105 13.9623 8.19175C13.9371 8.25245 13.9002 8.30759 13.8538 8.35403Z" fill="#2568CB"/>
                            </svg>
                        </div>
                    </div>
                </a>
                {% endfor %}
                <div class="show-all-overlay {{ color == 'bg-beige-100' ? 'beige' : 'white' }}"></div>
            </div>
            {% if downloads|length > 6 %}
            <div class="show-all-btn-container">
                <button class="button button--secondary show-all-btn">Show All</button>
            </div>
            {% endif %}
        </div>
    </div>
</section>